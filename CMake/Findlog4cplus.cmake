FIND_PATH(log4cplus_INCLUDE_DIR NAMES log4cplus/logger.h log4cplus/configurator.h log4cplus/loggingmacros.h PATHS ${log4cplus_INCLUDEDIR})

IF(WIN32)
	LIST(LENGTH CMAKE_CONFIGURATION_TYPES ConfigCount)
	IF(ConfigCount EQUAL 1)
		LIST(GET CMAKE_CONFIGURATION_TYPES 0 ConfigType)
		IF(ConfigType STREQUAL "Debug")
			SET(log4cplus_LIBRARY_NAME_DEBUG "log4cplusD")
		ELSE()
			SET(log4cplus_LIBRARY_NAME_RELEASE "log4cplus")
		ENDIF()
	ELSE()
		SET(log4cplus_LIBRARY_NAME_DEBUG "log4cplusD")
		SET(log4cplus_LIBRARY_NAME_RELEASE "log4cplus")
	ENDIF()
ELSE()
	SET(log4cplus_LIBRARY_NAME_DEBUG "log4cplus")
	SET(log4cplus_LIBRARY_NAME_RELEASE "log4cplus")
ENDIF()

IF(log4cplus_LIBRARY_NAME_DEBUG)
	GET_FILENAME_COMPONENT(log4cplus_LIBRARY_DIR_DEBUG ./Debug ABSOLUTE BASE_DIR ${log4cplus_LIBRARYDIR})
	FIND_LIBRARY(log4cplus_LIBRARY_DEBUG ${log4cplus_LIBRARY_NAME_DEBUG} PATHS ${log4cplus_LIBRARY_DIR_DEBUG})
	IF(log4cplus_LIBRARY_DEBUG)
		SET(log4cplus_LIBRARY_DEBUG ${log4cplus_LIBRARY_DEBUG} CACHE PATH "log4cplus debug library path" FORCE)
	ENDIF()
	IF(WIN32)
		FIND_FILE(log4cplus_DLL_LIBRARY_DEBUG "${log4cplus_LIBRARY_NAME_DEBUG}.dll" PATHS ${log4cplus_LIBRARY_DIR_DEBUG})
		IF(log4cplus_DLL_LIBRARY_DEBUG)
			SET(log4cplus_DLL_LIBRARY_DEBUG ${log4cplus_DLL_LIBRARY_DEBUG} CACHE PATH "log4cplus debug windows dll library path" FORCE)
		ENDIF()
	ENDIF()
ENDIF()
IF(log4cplus_LIBRARY_NAME_RELEASE)
	GET_FILENAME_COMPONENT(log4cplus_LIBRARY_DIR_RELEASE ./Release ABSOLUTE BASE_DIR ${log4cplus_LIBRARYDIR})
	FIND_LIBRARY(log4cplus_LIBRARY_RELEASE ${log4cplus_LIBRARY_NAME_RELEASE} PATHS ${log4cplus_LIBRARY_DIR_RELEASE})
	IF(log4cplus_LIBRARY_RELEASE)
		SET(log4cplus_LIBRARY_RELEASE ${log4cplus_LIBRARY_RELEASE} CACHE PATH "log4cplus release library path" FORCE)
	ENDIF()
	IF(WIN32)
		FIND_FILE(log4cplus_DLL_LIBRARY_RELEASE "${log4cplus_LIBRARY_NAME_RELEASE}.dll" PATHS ${log4cplus_LIBRARY_DIR_RELEASE})
		IF(log4cplus_DLL_LIBRARY_RELEASE)
			SET(log4cplus_DLL_LIBRARY_RELEASE ${log4cplus_DLL_LIBRARY_RELEASE} CACHE PATH "log4cplus release windows dll library path" FORCE)
		ENDIF()
	ENDIF()
ENDIF()

IF(NOT log4cplus_INCLUDE_DIR OR ((WIN32 AND (NOT log4cplus_LIBRARY_DEBUG OR NOT log4cplus_DLL_LIBRARY_DEBUG)) AND (WIN32 AND (NOT log4cplus_LIBRARY_RELEASE OR NOT log4cplus_DLL_LIBRARY_RELEASE))) OR (NOT log4cplus_LIBRARY_DEBUG AND NOT log4cplus_LIBRARY_RELEASE))
	MESSAGE(FATAL_ERROR "Unable to find the requested log4cplus library,please set log4cplus_INCLUDEDIR and log4cplus_LIBRARYDIR to right path.")
ELSE()
	SET(log4cplus_FOUND TRUE)
	MESSAGE(STATUS "Found log4cplus library")
	MESSAGE(STATUS "  Include path: " ${log4cplus_INCLUDE_DIR})
	ADD_LIBRARY(log4cplus SHARED IMPORTED)
	SET_TARGET_PROPERTIES(log4cplus PROPERTIES INTERFACE_INCLUDE_DIRECTORIES ${log4cplus_INCLUDE_DIR})
	IF(log4cplus_LIBRARY_DEBUG)
		IF(WIN32)
			SET_TARGET_PROPERTIES(log4cplus PROPERTIES IMPORTED_LOCATION_DEBUG ${log4cplus_DLL_LIBRARY_DEBUG})
			SET_TARGET_PROPERTIES(log4cplus PROPERTIES IMPORTED_IMPLIB_DEBUG ${log4cplus_LIBRARY_DEBUG})
			MESSAGE(STATUS "  Debug library path: " ${log4cplus_DLL_LIBRARY_DEBUG})
			MESSAGE(STATUS "  Debug imported library path: " ${log4cplus_LIBRARY_DEBUG})
		ELSE()
			SET_TARGET_PROPERTIES(log4cplus PROPERTIES IMPORTED_LOCATION_DEBUG ${log4cplus_LIBRARY_DEBUG})
			MESSAGE(STATUS "  Debug library path: " ${log4cplus_LIBRARY_DEBUG})
		ENDIF()
	ENDIF()
	IF(log4cplus_LIBRARY_RELEASE)
		IF(WIN32)
			SET_TARGET_PROPERTIES(log4cplus PROPERTIES IMPORTED_LOCATION_RELEASE ${log4cplus_DLL_LIBRARY_RELEASE})
			SET_TARGET_PROPERTIES(log4cplus PROPERTIES IMPORTED_IMPLIB_RELEASE ${log4cplus_LIBRARY_RELEASE})
			SET_TARGET_PROPERTIES(log4cplus PROPERTIES IMPORTED_LOCATION_RELWITHDEBINFO ${log4cplus_DLL_LIBRARY_RELEASE})
			SET_TARGET_PROPERTIES(log4cplus PROPERTIES IMPORTED_IMPLIB_RELWITHDEBINFO ${log4cplus_LIBRARY_RELEASE})
			MESSAGE(STATUS "  Release library path: " ${log4cplus_DLL_LIBRARY_RELEASE})
			MESSAGE(STATUS "  Release imported library path: " ${log4cplus_LIBRARY_RELEASE})
		ELSE()
			SET_TARGET_PROPERTIES(log4cplus PROPERTIES IMPORTED_LOCATION_RELEASE ${log4cplus_LIBRARY_RELEASE})
			SET_TARGET_PROPERTIES(log4cplus PROPERTIES IMPORTED_LOCATION_RELWITHDEBINFO ${log4cplus_LIBRARY_RELEASE})
			MESSAGE(STATUS "  Release library path: " ${log4cplus_LIBRARY_RELEASE})
		ENDIF()
	ENDIF()
ENDIF()